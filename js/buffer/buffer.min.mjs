/*! The buffer module from node.js, for the browser. | @author Feross Aboukhadijeh <https://feross.org> | @license MIT | Copyright (c) Feross Aboukhadijeh, and other contributors. Copyright (c) 2021 Lauro Moraes <https://github.com/subversivo58> */
import base64 from"./base64-js.mjs";import ieee754 from"./ieee754.mjs";const customInspectSymbol="function"==typeof Symbol&&"function"==typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null,K_MAX_LENGTH=2147483647,kMaxLength=K_MAX_LENGTH,INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function typedArraySupport(){try{const a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){return Buffer.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){return Buffer.isBuffer(this)?this.byteOffset:void 0}});function createBuffer(a){if(a>K_MAX_LENGTH)throw new RangeError("The value \""+a+"\" is invalid for option \"size\"");const b=new Uint8Array(a);return Object.setPrototypeOf(b,Buffer.prototype),b}function Buffer(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new TypeError("The \"string\" argument must be of type string. Received type number");return allocUnsafe(a)}return from(a,b,c)}Buffer.poolSize=8192;function from(a,c,d){if("string"==typeof a)return fromString(a,c);if(ArrayBuffer.isView(a))return fromArrayView(a);if(null==a)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(isInstance(a,ArrayBuffer)||a&&isInstance(a.buffer,ArrayBuffer))return fromArrayBuffer(a,c,d);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(a,SharedArrayBuffer)||a&&isInstance(a.buffer,SharedArrayBuffer)))return fromArrayBuffer(a,c,d);if("number"==typeof a)throw new TypeError("The \"value\" argument must not be of type number. Received type number");const e=a.valueOf&&a.valueOf();if(null!=e&&e!==a)return Buffer.from(e,c,d);const f=fromObject(a);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return Buffer.from(a[Symbol.toPrimitive]("string"),c,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}Buffer.from=function(a,b,c){return from(a,b,c)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(a){if("number"!=typeof a)throw new TypeError("\"size\" argument must be of type number");else if(0>a)throw new RangeError("The value \""+a+"\" is invalid for option \"size\"")}function alloc(a,b,c){return assertSize(a),0>=a?createBuffer(a):void 0===b?createBuffer(a):"string"==typeof c?createBuffer(a).fill(b,c):createBuffer(a).fill(b)}Buffer.alloc=function(a,b,c){return alloc(a,b,c)};function allocUnsafe(a){return assertSize(a),createBuffer(0>a?0:0|checked(a))}Buffer.allocUnsafe=function(a){return allocUnsafe(a)},Buffer.allocUnsafeSlow=function(a){return allocUnsafe(a)};function fromString(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!Buffer.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const c=0|byteLength(a,b);let d=createBuffer(c);const e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function fromArrayLike(a){const b=0>a.length?0:0|checked(a.length),c=createBuffer(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function fromArrayView(a){if(isInstance(a,Uint8Array)){const b=new Uint8Array(a);return fromArrayBuffer(b.buffer,b.byteOffset,b.byteLength)}return fromArrayLike(a)}function fromArrayBuffer(a,b,c){if(0>b||a.byteLength<b)throw new RangeError("\"offset\" is outside of buffer bounds");if(a.byteLength<b+(c||0))throw new RangeError("\"length\" is outside of buffer bounds");let d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),Object.setPrototypeOf(d,Buffer.prototype),d}function fromObject(a){if(Buffer.isBuffer(a)){const b=0|checked(a.length),c=createBuffer(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}return void 0===a.length?"Buffer"===a.type&&Array.isArray(a.data)?fromArrayLike(a.data):void 0:"number"!=typeof a.length||numberIsNaN(a.length)?createBuffer(0):fromArrayLike(a)}function checked(a){if(a>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|a}function SlowBuffer(a){return+a!=a&&(a=0),Buffer.alloc(+a)}Buffer.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==Buffer.prototype},Buffer.compare=function(c,d){if(isInstance(c,Uint8Array)&&(c=Buffer.from(c,c.offset,c.byteLength)),isInstance(d,Uint8Array)&&(d=Buffer.from(d,d.offset,d.byteLength)),!Buffer.isBuffer(c)||!Buffer.isBuffer(d))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(c===d)return 0;let e=c.length,f=d.length;for(let a=0,b=Math.min(e,f);a<b;++a)if(c[a]!==d[a]){e=c[a],f=d[a];break}return e<f?-1:f<e?1:0},Buffer.isEncoding=function(a){switch((a+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},Buffer.concat=function(a,b){if(!Array.isArray(a))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===a.length)return Buffer.alloc(0);let c;if(b===void 0)for(b=0,c=0;c<a.length;++c)b+=a[c].length;const d=Buffer.allocUnsafe(b);let e=0;for(c=0;c<a.length;++c){let b=a[c];if(isInstance(b,Uint8Array))e+b.length>d.length?(!Buffer.isBuffer(b)&&(b=Buffer.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(!Buffer.isBuffer(b))throw new TypeError("\"list\" argument must be an Array of Buffers");else b.copy(d,e);e+=b.length}return d};function byteLength(a,b){if(Buffer.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||isInstance(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof a);const c=a.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===c)return 0;for(let e=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return utf8ToBytes(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return base64ToBytes(a).length;default:if(e)return d?-1:utf8ToBytes(a).length;b=(""+b).toLowerCase(),e=!0;}}Buffer.byteLength=byteLength;function slowToString(a,b,c){let d=!1;if((void 0===b||0>b)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),0>=c)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return hexSlice(this,b,c);case"utf8":case"utf-8":return utf8Slice(this,b,c);case"ascii":return asciiSlice(this,b,c);case"latin1":case"binary":return latin1Slice(this,b,c);case"base64":return base64Slice(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0;}}Buffer.prototype._isBuffer=!0;function swap(a,b,c){const d=a[b];a[b]=a[c],a[c]=d}Buffer.prototype.swap16=function(){const a=this.length;if(0!=a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)swap(this,b,b+1);return this},Buffer.prototype.swap32=function(){const a=this.length;if(0!=a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)swap(this,b,b+3),swap(this,b+1,b+2);return this},Buffer.prototype.swap64=function(){const a=this.length;if(0!=a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)swap(this,b,b+7),swap(this,b+1,b+6),swap(this,b+2,b+5),swap(this,b+3,b+4);return this},Buffer.prototype.toString=function(){const a=this.length;return 0===a?"":0===arguments.length?utf8Slice(this,0,a):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(a){if(!Buffer.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===Buffer.compare(this,a)},Buffer.prototype.inspect=function(){let a="";const b=INSPECT_MAX_BYTES;return a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(a+=" ... "),"<Buffer "+a+">"},customInspectSymbol&&(Buffer.prototype[customInspectSymbol]=Buffer.prototype.inspect),Buffer.prototype.compare=function(a,b,c,d,e){if(isInstance(a,Uint8Array)&&(a=Buffer.from(a,a.offset,a.byteLength)),!Buffer.isBuffer(a))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b;const h=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let l=0;l<h;++l)if(j[l]!==k[l]){f=j[l],g=k[l];break}return f<g?-1:g<f?1:0};function bidirectionalIndexOf(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,numberIsNaN(c)&&(c=e?0:a.length-1),0>c&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;if("string"==typeof b&&(b=Buffer.from(b,d)),Buffer.isBuffer(b))return 0===b.length?-1:arrayIndexOf(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):arrayIndexOf(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}let g=1,h=a.length,k=b.length;if(void 0!==d&&(d=(d+"").toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2,h/=2,k/=2,c/=2}let l;if(e){let d=-1;for(l=c;l<h;l++)if(f(a,l)!==f(b,-1===d?0:l-d))-1!==d&&(l-=l-d),d=-1;else if(-1===d&&(d=l),l-d+1===k)return d*g}else for(c+k>h&&(c=h-k),l=c;0<=l;l--){let c=!0;for(let d=0;d<k;d++)if(f(a,l+d)!==f(b,d)){c=!1;break}if(c)return l}return-1}Buffer.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},Buffer.prototype.indexOf=function(a,b,c){return bidirectionalIndexOf(this,a,b,c,!0)},Buffer.prototype.lastIndexOf=function(a,b,c){return bidirectionalIndexOf(this,a,b,c,!1)};function hexWrite(a,b,c,d){c=+c||0;const e=a.length-c;d?(d=+d,d>e&&(d=e)):d=e;const f=b.length;d>f/2&&(d=f/2);let g;for(g=0;g<d;++g){const d=parseInt(b.substr(2*g,2),16);if(numberIsNaN(d))return g;a[c+g]=d}return g}function utf8Write(a,b,c,d){return blitBuffer(utf8ToBytes(b,a.length-c),a,c,d)}function asciiWrite(a,b,c,d){return blitBuffer(asciiToBytes(b),a,c,d)}function base64Write(a,b,c,d){return blitBuffer(base64ToBytes(b),a,c,d)}function ucs2Write(a,b,c,d){return blitBuffer(utf16leToBytes(b,a.length-c),a,c,d)}Buffer.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const e=this.length-b;if((void 0===c||c>e)&&(c=e),0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(let e=!1;;)switch(d){case"hex":return hexWrite(this,a,b,c);case"utf8":case"utf-8":return utf8Write(this,a,b,c);case"ascii":case"latin1":case"binary":return asciiWrite(this,a,b,c);case"base64":return base64Write(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,a,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),e=!0;}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(a,b,c){return 0===b&&c===a.length?base64.fromByteArray(a):base64.fromByteArray(a.slice(b,c))}function utf8Slice(a,b,c){c=Math.min(a.length,c);const d=[];for(let e=b;e<c;){const b=a[e];let f=null,g=239<b?4:223<b?3:191<b?2:1;if(e+g<=c){let c,d,h,i;1===g?128>b&&(f=b):2===g?(c=a[e+1],128==(192&c)&&(i=(31&b)<<6|63&c,127<i&&(f=i))):3===g?(c=a[e+1],d=a[e+2],128==(192&c)&&128==(192&d)&&(i=(15&b)<<12|(63&c)<<6|63&d,2047<i&&(55296>i||57343<i)&&(f=i))):4===g?(c=a[e+1],d=a[e+2],h=a[e+3],128==(192&c)&&128==(192&d)&&128==(192&h)&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h,65535<i&&1114112>i&&(f=i))):void 0}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(55296|1023&f>>>10),f=56320|1023&f),d.push(f),e+=g}return decodeCodePointsArray(d)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(a){const b=a.length;if(b<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=MAX_ARGUMENTS_LENGTH));return c}function asciiSlice(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function latin1Slice(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function hexSlice(a,b,c){const d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=hexSliceLookupTable[a[d]];return e}function utf16leSlice(a,b,c){const d=a.slice(b,c);let e="";for(let f=0;f<d.length-1;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}Buffer.prototype.slice=function(a,b){const c=this.length;a=~~a,b=b===void 0?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),b<a&&(b=a);const d=this.subarray(a,b);return Object.setPrototypeOf(d,Buffer.prototype),d};function checkOffset(a,b,c){if(0!=a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||checkOffset(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||checkOffset(a,b,this.length);let d=this[a+--b],e=1;for(;0<b&&(e*=256);)d+=this[a+--b]*e;return d},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(a,b){return a>>>=0,b||checkOffset(a,1,this.length),this[a]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(a,b){return a>>>=0,b||checkOffset(a,2,this.length),this[a]|this[a+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(a,b){return a>>>=0,b||checkOffset(a,2,this.length),this[a]<<8|this[a+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(a,b){return a>>>=0,b||checkOffset(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(a,b){return a>>>=0,b||checkOffset(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(a){a>>>=0,validateNumber(a,"offset");const b=this[a],c=this[a+7];(b===void 0||c===void 0)&&boundsError(a,this.length-8);const d=b+this[++a]*256+this[++a]*65536+this[++a]*16777216,e=this[++a]+this[++a]*256+this[++a]*65536+c*16777216;return BigInt(d)+(BigInt(e)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(a){a>>>=0,validateNumber(a,"offset");const b=this[a],c=this[a+7];(b===void 0||c===void 0)&&boundsError(a,this.length-8);const d=b*16777216+this[++a]*65536+this[++a]*256+this[++a],e=this[++a]*16777216+this[++a]*65536+this[++a]*256+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),Buffer.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||checkOffset(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},Buffer.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||checkOffset(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;0<d&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},Buffer.prototype.readInt8=function(a,b){return a>>>=0,b||checkOffset(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},Buffer.prototype.readInt16LE=function(a,b){a>>>=0,b||checkOffset(a,2,this.length);const c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},Buffer.prototype.readInt16BE=function(a,b){a>>>=0,b||checkOffset(a,2,this.length);const c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},Buffer.prototype.readInt32LE=function(a,b){return a>>>=0,b||checkOffset(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},Buffer.prototype.readInt32BE=function(a,b){return a>>>=0,b||checkOffset(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(a){a>>>=0,validateNumber(a,"offset");const b=this[a],c=this[a+7];(b===void 0||c===void 0)&&boundsError(a,this.length-8);const d=this[a+4]+this[a+5]*256+this[a+6]*65536+(c<<24);return(BigInt(d)<<BigInt(32))+BigInt(b+this[++a]*256+this[++a]*65536+this[++a]*16777216)}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(a){a>>>=0,validateNumber(a,"offset");const b=this[a],c=this[a+7];(b===void 0||c===void 0)&&boundsError(a,this.length-8);const d=(b<<24)+this[++a]*65536+this[++a]*256+this[++a];return(BigInt(d)<<BigInt(32))+BigInt(this[++a]*16777216+this[++a]*65536+this[++a]*256+c)}),Buffer.prototype.readFloatLE=function(a,b){return a>>>=0,b||checkOffset(a,4,this.length),ieee754.read(this,a,!0,23,4)},Buffer.prototype.readFloatBE=function(a,b){return a>>>=0,b||checkOffset(a,4,this.length),ieee754.read(this,a,!1,23,4)},Buffer.prototype.readDoubleLE=function(a,b){return a>>>=0,b||checkOffset(a,8,this.length),ieee754.read(this,a,!0,52,8)},Buffer.prototype.readDoubleBE=function(a,b){return a>>>=0,b||checkOffset(a,8,this.length),ieee754.read(this,a,!1,52,8)};function checkInt(a,b,c,d,e,f){if(!Buffer.isBuffer(a))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(b>e||b<f)throw new RangeError("\"value\" argument is out of bounds");if(c+d>a.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){const d=Math.pow(2,8*c)-1;checkInt(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=255&a/e;return b+c},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){const d=Math.pow(2,8*c)-1;checkInt(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;0<=--e&&(f*=256);)this[b+e]=255&a/f;return b+c},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,1,255,0),this[b]=255&a,b+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4};function wrtBigUInt64LE(a,b,c,d,e){checkIntBI(b,d,e,a,c,7);let f=+(b&BigInt(4294967295));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=+(b>>BigInt(32)&BigInt(4294967295));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function wrtBigUInt64BE(a,b,c,d,e){checkIntBI(b,d,e,a,c,7);let f=+(b&BigInt(4294967295));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=+(b>>BigInt(32)&BigInt(4294967295));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(a,b=0){return wrtBigUInt64LE(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(a,b=0){return wrtBigUInt64BE(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){const d=Math.pow(2,8*c-1);checkInt(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)0>a&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=255&(a/f>>0)-g;return b+c},Buffer.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){const d=Math.pow(2,8*c-1);checkInt(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;0<=--e&&(f*=256);)0>a&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=255&(a/f>>0)-g;return b+c},Buffer.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,1,127,-128),0>a&&(a=255+a+1),this[b]=255&a,b+1},Buffer.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},Buffer.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},Buffer.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},Buffer.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||checkInt(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(a,b=0){return wrtBigUInt64LE(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(a,b=0){return wrtBigUInt64BE(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function checkIEEE754(a,b,c,d){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range")}function writeFloat(a,b,c,d,e){return b=+b,c>>>=0,e||checkIEEE754(a,b,c,4,34028234663852886e22,-34028234663852886e22),ieee754.write(a,b,c,d,23,4),c+4}Buffer.prototype.writeFloatLE=function(a,b,c){return writeFloat(this,a,b,!0,c)},Buffer.prototype.writeFloatBE=function(a,b,c){return writeFloat(this,a,b,!1,c)};function writeDouble(a,b,c,d,e){return b=+b,c>>>=0,e||checkIEEE754(a,b,c,8,17976931348623157e292,-17976931348623157e292),ieee754.write(a,b,c,d,52,8),c+8}Buffer.prototype.writeDoubleLE=function(a,b,c){return writeDouble(this,a,b,!0,c)},Buffer.prototype.writeDoubleBE=function(a,b,c){return writeDouble(this,a,b,!1,c)},Buffer.prototype.copy=function(a,b,c,d){if(!Buffer.isBuffer(a))throw new TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),0<d&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);const e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},Buffer.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!Buffer.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===a.length){const b=a.charCodeAt(0);("utf8"===d&&128>b||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=+a);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=c===void 0?this.length:c>>>0,a||(a=0);let e;if("number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{const f=Buffer.isBuffer(a)?a:Buffer.from(a,d),g=f.length;if(0===g)throw new TypeError("The value \""+a+"\" is invalid for argument \"value\"");for(e=0;e<c-b;++e)this[e+b]=f[e%g]}return this};const errors={};function E(a,b,c){errors[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}E("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),E("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&4294967296<Math.abs(c)?e=addNumericalSeparator(c+""):"bigint"==typeof c&&(e=c+"",(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=addNumericalSeparator(e)),e+="n"),d+=` It must be ${b}. Received ${e}`,d},RangeError);function addNumericalSeparator(a){let b="",c=a.length;for(const d="-"===a[0]?1:0;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function checkBounds(a,b,c){validateNumber(b,"offset"),(a[b]===void 0||a[b+c]===void 0)&&boundsError(b,a.length-(c+1))}function checkIntBI(a,b,c,d,e,f){if(a>c||a<b){const d="bigint"==typeof b?"n":"";let e;throw e=3<f?0===b||b===BigInt(0)?`>= 0${d} and < 2${d} ** ${8*(f+1)}${d}`:`>= -(2${d} ** ${8*(f+1)-1}${d}) and < 2 ** `+`${8*(f+1)-1}${d}`:`>= ${b}${d} and <= ${c}${d}`,new errors.ERR_OUT_OF_RANGE("value",e,a)}checkBounds(d,e,f)}function validateNumber(a,b){if("number"!=typeof a)throw new errors.ERR_INVALID_ARG_TYPE(b,"number",a)}function boundsError(a,b,c){if(Math.floor(a)!==a)throw validateNumber(a,c),new errors.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(0>b)throw new errors.ERR_BUFFER_OUT_OF_BOUNDS;throw new errors.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${b}`,a)}const INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(a){if(a=a.split("=")[0],a=a.trim().replace(INVALID_BASE64_RE,""),2>a.length)return"";for(;0!=a.length%4;)a+="=";return a}function utf8ToBytes(a,b){b=b||1/0;let c;const d=a.length;let e=null;const f=[];for(let g=0;g<d;++g){if(c=a.charCodeAt(g),55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);if(e=null,128>c){if(0>(b-=1))break;f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(192|c>>6,128|63&c)}else if(65536>c){if(0>(b-=3))break;f.push(224|c>>12,128|63&c>>6,128|63&c)}else if(1114112>c){if(0>(b-=4))break;f.push(240|c>>18,128|63&c>>12,128|63&c>>6,128|63&c)}else throw new Error("Invalid code point")}return f}function asciiToBytes(a){const b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function utf16leToBytes(a,b){let d,e,f;const g=[];for(let c=0;c<a.length&&!(0>(b-=2));++c)d=a.charCodeAt(c),e=d>>8,f=d%256,g.push(f),g.push(e);return g}function base64ToBytes(a){return base64.toByteArray(base64clean(a))}function blitBuffer(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function isInstance(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function numberIsNaN(a){return a!==a}const hexSliceLookupTable=function(){const a="0123456789abcdef",b=Array(256);for(let c=0;16>c;++c){const d=16*c;for(let e=0;16>e;++e)b[d+e]=a[c]+a[e]}return b}();function defineBigIntMethod(a){return"undefined"==typeof BigInt?BufferBigIntNotDefined:a}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}export{Buffer,SlowBuffer,INSPECT_MAX_BYTES,kMaxLength};